<div class="flex-container footer" style="line-height: 1.9;">

    <div class="flex-block">
        <div class="collapsible">
            <h4 class="footer-section-header">Kasutajatugi</h4>
            <i class="fa fa-caret-left float-right" style="color:white"></i>
        </div>
        <div class="block-content to-be-hidden">
            <ul class="footer links" style=" text-align:center;">
                <li class="nav item"><a href="/klienditeenindus">Kasutajatugi</a></li>
                <li class="nav item"><a href="/klienditeenindus">Kontaktid</a></li>
                <li class="nav item"><a href="/garantii">Garantii</a></li>
                <li class="nav item"><a href="/taganemisoigus">Tganemisõigus</a></li>
                <li class="nav item"><a href="/professionaalsed-manguvaljakud">Professionaalsed manguvaljakud</a></li>
            </ul>
        </div>
    </div>
    <div class="flex-block">
        <div class="collapsible">
            <h4 class="footer-section-header">Tellimus</h4>
            <i class="fa fa-caret-left float-right" style="color:white"></i>
        </div>
        <div class="block-content to-be-hidden">
            <ul class="footer links">
                <li class="nav item"><a href="/tellimus">Tellimus</a></li>
                <li class="nav item"><a href="/makse">Makse</a></li>
                <li class="nav item"><a href="/kohaletoimetamine">Kohaletoimetamine</a></li>
                <li class="nav item"><a href="/kokkupanek">Paigalduse teenused</a></li>
                <li class="nav item"><a href="/accessoires/varuosad">Varuosad</a></li>
            </ul>
        </div>
    </div>

    <div class="flex-block">
        <div class="collapsible">
            <h4 class="footer-section-header">Ohutus ja kvaliteet</h4>
            <i class="fa fa-caret-left float-right" style="color:white"></i>
        </div>
        <div class="block-content to-be-hidden">
            <ul class="footer links">
                <li class="nav item"><a href="/kokkupanek">Kokkupanek</a></li>
                <li class="nav item"><a href="/kokkupanek">Juhendid</a></li>
                <li class="nav item"><a href="/puidu-tuup-kvaliteedi">Puidu kvaliteet</a></li>
                <li class="nav item"><a href="/ohutus">Ohutus</a></li>
                <li class="nav item"><a href="/puidu-tuup-kvaliteedi">Vastupidavus</a></li>
            </ul>
        </div>
    </div>

    <div class="flex-block">
        <h4 class="footer-section-header" id="social-section-header">Social & Blog</h4>
        <div class="block-content">
            <ul class="footer links" id="social-media-icons">
                <a href="https://www.facebook.com/OfficialJungleGym" TARGET="_blank">
                    <span class="fa-stack fa-lg" style="margin-right:15px;">
                        <i class="fa fa-circle fa-stack-2x" style="color:#3b5998"></i>
                        <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                    </span></a>
                <a href="https://www.instagram.com/junglegymofficial/" TARGET="_blank">
                    <span class="fa-stack fa-lg" style="margin-right:15px;">
                        <i class="fa fa-circle fa-stack-2x" style="color:#833ab4"></i>
                        <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                    </span></a>
                <a href="https://nl.pinterest.com/junglegymofficial/" TARGET="_blank">
                    <span class="fa-stack fa-lg" style="margin-right:15px;">
                        <i class="fa fa-circle fa-stack-2x" style="color:#bd081c"></i>
                        <i class="fa fa-pinterest-p fa-stack-1x fa-inverse"></i>
                    </span></a>
                <a href="https://www.youtube.com/user/junglegymplaygrounds" TARGET="_blank">
                    <span class="fa-stack fa-lg" style="margin-right:15px;">
                        <i class="fa fa-circle fa-stack-2x" style="color:#cd201f"></i>
                        <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
                <a href="/blog">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x" style="color:#4ec425"></i>
                        <span
                            style="color: white; font-size: small; position: absolute; margin-left: 5px; font-weight: 600;">blog</span>
                    </span>
                </a>
        </div>

        <div class="block-content">
            <h4 class="footer-section-header" id="newsletter-section-header">Lugege meie uudiskirja</h4>
            <div class="block newsletter">
                <form id="newsletter-validate-detail" class="form subscribe"
                    action="https://www.junglegym.nl/newsletter/subscriber/new/" method="post" novalidate="novalidate">
                    <div class="field newsletter">
                        <label class="label" for="newsletter">
                            <span>Sign Up for Our Newsletter:</span>
                        </label>
                        <div class="control">
                            <input id="newsletter"
                                style="background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAAXNSR0IArs4c6QAAAPhJREFUOBHlU70KgzAQPlMhEvoQTg6OPoOjT+JWOnRqkUKHgqWP4OQbOPokTk6OTkVULNSLVc62oJmbIdzd95NcuGjX2/3YVI/Ts+t0WLE2ut5xsQ0O+90F6UxFjAI8qNcEGONia08e6MNONYwCS7EQAizLmtGUDEzTBNd1fxsYhjEBnHPQNG3KKTYV34F8ec/zwHEciOMYyrIE3/ehKAqIoggo9inGXKmFXwbyBkmSQJqmUNe15IRhCG3byphitm1/eUzDM4qR0TTNjEixGdAnSi3keS5vSk2UDKqqgizLqB4YzvassiKhGtZ/jDMtLOnHz7TE+yf8BaDZXA509yeBAAAAAElFTkSuQmCC'); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%; cursor: auto;"
                                autocomplete="off" name="email" type="email" placeholder="E-mailadres"
                                data-validate="{required:true, 'validate-email':true}" />
                        </div>
                    </div>
                    <div class="actions"><button class="action subscribe primary" title="&gt;"
                            type="submit"><span>&gt;</span></button></div>
                </form>
            </div>
        </div>
    </div>
</div>
<hr />
<div class="flex-container footer-b hideOnMobile" style="color: white; margin-left: -50px; margin-right: -50px;">
    <div class="footer-bottom-links small"
        style="color: white; background-color: #273443; text-align: center; width: 97%;">
        <a style="margin: 0 15px;" href="{{store url='kataloog-jungle-gym'}}">Kataloog</a>
        <a style="margin: 0 15px;" href="{{store url='company-site-notice'}}">Ettevõtte teave </a>
        <a style="margin: 0 15px;" href="{{store url='orivaatsuspoliitika'}}">Andmekaitse</a>
        <a style="margin: 0 15px;" href="{{store url='terms-and-conditions'}}">Tingimused </a>
        <a style="margin: 0 15px;" href="{{store url='site-map'}}">Sitemap</a>
        <img id="ssl-certificate-img" src="{{media url=&quot;wysiwyg/comodo-ssl-logo.png&quot;}}"
            alt="Comodo SSL Certificate" style="max-width=82px;" />
    </div>
</div>

<!-- code voor service portal -->

<p>{{widget type="Magento\Cms\Block\Widget\Block" template="widget/static_block/default.phtml" block_id="100"}}</p>

<!--Mobile collapsing footer related script -->
<script>

    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = (content.scrollHeight + 5) + "px";
                this.classList.remove("active");
            }
        });
    }

    require(['jquery', 'domReady!'], function ($) {
        $(".collapsible").click(function () {
            $(this).children().eq(1).toggleClass("rotated-arrow-icon");
        });
    });

</script>


<style>
    /* ------------------------------------------ Collapsible Footer related styles ------------------------------------------------- */


    .footer.content h4.footer-section-header>a {
        color: white;
        text-decoration: none;
    }

    .footer.content h4 {
        font-size: 1.2em;
    }

    .fa.fa-caret-left {
        display: none;
    }

    .rotated-arrow-icon {
        margin-top: 10px;
        -webkit-transform: rotate(270deg);
        /* Chrome, Safari 3.1+ */
        -moz-transform: rotate(270deg);
        /* Firefox 3.5-15 */
        -ms-transform: rotate(270deg);
        /* IE 9 */
        -o-transform: rotate(270deg);
        /* Opera 10.50-12.00 */
        transform: rotate(270deg);
        /* Firefox 16+, IE 10+, Opera 12.10+ */
    }

    @media (max-width: 768px) {

        .fa.fa-caret-left {
            font-size: 1.4em;
            display: inline-block;
            padding-top: 20px;
            float: right;
            margin-right: 20%;
        }

        .page-footer .collapsible {
            margin-top: 5px;
        }

        .page-footer .to-be-hidden {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #334152;
            padding-left: 20%;
        }

        .page-footer a.mst_seo_autolink.autolink {
            pointer-events: none;
        }

        #social-media-icons {
            display: inline-flex;
            padding-left: 18%;
        }

        .page-footer .footer.content {
            margin-bottom: 20px;
            padding-top: 15px;
            padding-bottom: 35px;
        }

        .page-footer .flex-container.footer {
            margin: 0 auto;
        }

        .page-footer hr {
            display: none;
        }

        .page-footer {
            margin-top: -15px;
            padding-bottom: 30px;
        }

        .page-footer .flex-block {
            min-width: 100vw;
            padding: 0 0 0 0;
        }

        .page-footer h4.footer-section-header {
            padding-left: 18%;
            display: inline-block;
            margin-bottom: 1.5em !important;
        }

        .page-footer .block.newsletter {
            padding-left: 18%;
            padding-right: 15%;
            max-width: 330px;
        }

        .block.newsletter .field {
            margin: 0;
            min-width: 250px;
        }

        #social-section-header,
        #newsletter-section-header {
            display: block;
        }

        .block.newsletter input {
            padding-left: 20%;
        }

        input#newsletter {
            width: 61vw;
        }
    }


    @media (max-width: 410px) {

        input#newsletter {
            width: 85vw;
            max-width: 220px;
        }

        .block.newsletter .action.subscribe {
            margin-left: -32px;
            border-radius: 0 3px 3px 0;
        }
    }
</style>



<script type="text/javascript">

    //Extra info button and pop up for payment options
    //Estonian specific content
    var PaymentMethods = {
        "Rahvusvaheline pangaülekanne": `Euroopas on (rahvusvaheline) pangaülekanne turvaline ja kiire. Pärast ostmist saate summa ülekandmiseks e-kirja maksejuhistega.
           Pange tähele, et summa tuleb kanda teie Adyeni pangakonto numbrile. Kui makse on laekunud, töödeldakse teie tellimus.`,
        Paysafecard: `Paysafecard is a prepaid online payment method based on vouchers with a 16-digit PIN code, independent of bank account, credit card, or other personal information. 
          Customers can purchase vouchers at local sales outlets and pay online by entering the code at the checkout of the respective website (e. g. an online game). 
          Kas soovite rohkem teada saada? Lisateabe saamiseks külastage saiti <a href="https://www.paysafe.com" target="_blank">www.paysafe.com</a> `,
        "SEPA Direct Debit": `SEPA (Single Euro Payments Area) Direct Debit was introduced by the European Payments Council to create a standardized payments infrastructure within the EU. With SEPA Direct Debit, businesses can process one-off or recurring payments 
          for EU customers, making it a key payment method for businesses looking to expand across Europe. Kas soovite rohkem teada saada? Lisateabe saamiseks külastage saiti <a href="https://www.adyen.com/payment-methods/sepa-direct-debit" target="_blank">www.adyen.com</a> `,
        CreditCard: `Tasuda saab nii Mastercard kui ka VISA abil ilma lisatasuta. Adyen tagab kõrgeima võimaliku andmekaitse taseme. Pange tähele, et tellimuse nimi ja kaardi omaniku nimi peavad olema samad.
          Summa debiteeritakse teie krediitkaardikontolt kohe pärast maksekorralduse saamist. Kas soovite rohkem teada saada? Lisateabe saamiseks külastage saiti <a href="https://www.adyen.com" target="_blank">www.adyen.com</a>`,
        PayPal: `Turvaline, kiire ja otsene veebimakse oma PayPali kontoga. Kui olete tellimuse täitnud, suunatakse teid automaatselt Paypali makseportaali.
    Seal salvestatud andmed kantakse kohe meie poodi üle, te ei pea lisaandmeid sisestama.
    Kas soovite rohkem teada saada? Lisateabe saamiseks külastage saiti <a href="https://www.paypal.com" target="_blank">www.paypal.com</a>`,
        "PayPal Express Checkout": `Turvaline, kiire ja otsene veebimakse oma PayPali kontoga. Kui olete tellimuse täitnud, suunatakse teid automaatselt Paypali makseportaali.
    Seal salvestatud andmed kantakse kohe meie poodi üle, te ei pea lisaandmeid sisestama.
    Kas soovite rohkem teada saada? Lisateabe saamiseks külastage saiti <a href="https://www.paypal.com" target="_blank">www.paypal.com</a> `,
        "Trustly Direct bank e-Payments": `Turvaline ja kiire veebimakse usaldusväärse Adyeni kaudu. Maksate otse oma pangakonto kaudu. Kas soovite rohkem teada saada? Lisateabe saamiseks külastage saiti <a href="https://www.trustly.com" target="_blank">www.trustly.com</a>`
    }
    require(['jquery', 'domReady!'], function ($) {
        // payment info icon adder script
        // if the page is checkout page and the language is estonian the code below is activated
        if ($("body").hasClass("checkout-index-index") && $('html:lang(et)')) {

            var questionIcon = `<a class="payment-info-icon-popup" style="z-index: 5; padding=5px">
                                       <i  class= "fas fa-info-circle" style= "color: #c8d0c1;"></i>
                                   </a>`;
            var addIcon = setInterval(function () {
                if ($(".choice").length > 2) {
                    setTimeout(function () {
                        $(".checkout-index-index .payment-method .payment-method-title").each(
                            function () {
                                $(this).append(questionIcon);
                                $(".payment-info-icon-popup").mouseenter(function (e) {
                                    var mouseX = e.pageX;
                                    var mouseY = e.pageY;
                                    if (PaymentMethods.hasOwnProperty($(this).prev().children('span').text())) {
                                        $(".payment-method-name").html($(this).prev().children('span').text());
                                        $(".payment-method-information-details").html(PaymentMethods[$(".payment-method-name").text()]);
                                    }

                                    $(".payment-info-popup-container").css({ 'display': 'block', 'left': mouseX + 10, 'top': mouseY - 25 });
                                });
                                $(".close-button-span").click(function () {
                                    $(".payment-info-popup-container").css({ 'display': 'none' });
                                });
                            }
                        );
                    }, 2500);
                    clearInterval(addIcon);
                }
            }, 100); // check every 100ms
            // payment info icon adder script ends
            setTimeout(function () {
                // Element added into the body
                var infoButtonElement = `<div class= "payment-info-popup-container"
                                                    style= "
                                                    display: none;
                                                    background-color: white;
                                                    position: absolute;
                                                    padding: 10px 20px;
                                                    width: 400px;
                                                    z-index: 5;
                                                    border-radius: 15px;
                                                    box-shadow: 0 0 0 2px rgb(255, 255, 255), 0.3em 0.3em 1em rgba(0, 0, 0, 0.3);   
                                                    ">
                                                    <span class= "close-button-span">×</span>
                                                    <h4 class="payment-method-name"> Payment Method Name</h4>
                                                    <hr>
                                                    <p class="payment-method-information-details"> Bacon ipsum dolor amet tail buffalo jerky prosciutto cupim turducken shankle alcatra. 
                                                    Corned beef boudin drumstick pork. Shankle chicken ham, pancetta biltong short ribs 
                                                    tenderloin pork chop ham hock. 
                                                    
                                                    <span class="payment-method-information-button">Read more</span></p>
                                                    
                                                </div>`
                $("body").append(infoButtonElement);
            }, 3500);
        }

        // Script for order tracker
        else // Script for order tracker
        if ($("body").hasClass("sales-order-view") && $(".order-date").length) {

            var trackerElements = `
        <div id="order-tracker-container">
        <h1>Suivre ma commande</h1>

        <ul id="order-tracker">
            <li class="step step1">
                <i class="fa fa-circle fa-circle-general"></i>
                <i class="process-icon fas fa-shopping-cart"></i>
                <p style="position:absolute; margin-top: 45px;">Order</p>
            </li>
            <li class="step step2 undone">
                <i class="fa fa-circle fa-circle-general"></i>
                <i class="process-icon fas fa-tasks"></i>
                <p style="position:absolute; margin-top: 45px;">Processing</p>
            </li>
            <li class="step step3 undone">
                <i class="fa fa-circle fa-circle-general"></i>
                <i class="process-icon fas fa-gift"></i>
                <p style="position:absolute; margin-top: 45px;">Packaging</p>
            </li>
            <li class="step step4 undone">
                <i class="fa fa-circle fa-circle-general"></i>
                <i class="process-icon far fa-calendar-check"></i>
                <p style="position:absolute; margin-top: 45px;">Appointment</p>
            </li>
        </ul>

        <div class="progressbar bar-background">
            <div class="progressbar progressed"></div>
        </div>
    </div>

    <div id="order-tracker-informaion">
        <div id="current-process-icon"> </div>
        <div id="current-process-text">
            <article class="info-about-steps">
                Your order is being produced, composed and packaged.
            </article>
        </div>
    </div>

    <style>

        #order-tracker-informaion {
            display: block;
            margin: 0 auto;
            text-align: center;
        }

        #order-tracker-container h1 {
            text-align: center;
            font-family: 'Open Sans', sans-serif;
            font-weight: 400;
            font-size: 2em;
            margin-bottom: 3rem;
        }

        #order-tracker-container p {
            font-weight: 300;
            color: rgb(180, 179, 179);
            ;
        }

        #order-tracker-container .done>p {
            font-family: 'Open Sans', sans-serif;
            color: #4ec425;
            font-weight: 400;
        }

        #order-tracker-container .active>p {
            font-family: 'Open Sans', sans-serif;
            font-weight: 700;
        }

        .done .fa-circle {
            color: #4ec425;
        }

        .done.active .fa-circle {
            color: #4ec425;
            transform: scale(4, 4);
        }

        .done.active .process-icon {
            transform: scale(2, 2);
        }

        .fa-circle-general {
            transform: scale(3, 3);
            color: rgb(180, 179, 179);
        }

        .process-icon {
            color: white;
            transform: scale(1.5, 1.5);
        }

        .process-icon.fa-gift {
            margin-left: -12.5px;
        }

        .process-icon.fa-shopping-cart {
            margin-left: -14px;
        }

        .process-icon.fa-tasks {
            margin-left: -13px;
        }

        .process-icon.fa-calendar-check {
            margin-left: -12px;
        }

        .process-icon.fa-calendar-check {
            margin-left: -12px;
        }
        .process-icon.fa-shipping-fast {
            margin-left: -13px;
        }

        #order-tracker-container {
            display: block;
            margin: 30px auto;
            min-height:100px;
        }

        #order-tracker {
            display: flex;
            padding-left: 0;
        }

        .step {
            display: inline-flex;
            width: 25%;
            justify-content: center;
        }

        .bar-background {
            background-color: rgb(180, 179, 179);
            width: 100%;
            margin-top: -45px;
            margin-bottom: -20px;
        }

        .progressed {
            background-color: #4ec425;
        }

        .progressbar {
            height: 10px;
        }

        .progress0 {
            width: 12%;
        }

        .progress1 {
            width: 37%;
        }

        .progress2 {
            width: 62%;
        }

        .progress3 {
            width: 100%;
        }

        .info-about-steps {
            margin-top: 50px;
        }

    </style>
    `;

            var OrderTextContent = {
                step1: `
                        La commande sera traitée dès que le paiement aura été confirmé *.
                        <p style="font-style:italic;font-size:12px">(* Les commandes effectuées avec Klarna Pay Later seront traitées immédiatement).</p>
                        <br>
                        `,
                step2: `    
                        Bonne nouvelle, nous avons reçu votre paiement! Le délai de livraison commence maintenant.
                        `,
                step3: `
                        <p>Votre commande est en cours de production, de préparation et d'emballage.</p>
                       `,
                step4: `
                        <p>Votre commande est presque terminée!</p><br>
                        <p>Le transporteur vous appellera dans les prochains jours pour planifier un rendez-vous de livraison.</p><br>
                        <p style="color:red;"><span style="font-weight:bold">! Soyez prudent: </span>le transporteur peut parfois appeler depuis un numéro masqué.</p>
                       `,
                info: `
                        <hr>
                        <h3>Délai de livraison</h3>

                        <p>Accessoires | pièces de rechange: env. 3 à 4 jours ouvrables</p>
                        <p style="font-style:italic;font-size:12px;">Vous recevez un code de suivi par DHL.</p>
                        <p>Aires de jeux | modules d'extension | toboggans: env. 7 - 10 jours ouvrables</p>
                        <p style="font-style:italic;font-size:12px;">Le transporteur vous contactera pour convenir de la livraison lorsque votre commande sera prête pour le transport.</p>
                        <p>Aires de jeux commerciales: env. 15 jours ouvrables</p>
                        <p style="font-style:italic;font-size:12px;">Le transporteur vous contactera pour convenir de la livraison lorsque votre commande sera prête pour le transport.</p>
                        `
            };

            var orderDate = new Date($(".order-date date").text())
            console.log("Order date is : " + orderDate);
            var orderStatus = $(".order-status").text();
            var now = new Date();
            var timeDifference = now.getTime() - orderDate.getTime();
            var passedDays = Math.floor(timeDifference / (1000 * 3600 * 24));

            $(".order-details-items.ordered").append(trackerElements);

            if (orderStatus == "Pending") {
                $(".step1").addClass("done active");
                $(".progressed").addClass("progress0");
                $("#current-process-text article").html(OrderTextContent.step1 + OrderTextContent.info);
            } else if (orderStatus == "Processing") {
                $(".step2").addClass("done active");
                $(".step1").addClass("done");
                $(".progressed").addClass("progress1");
                $("#current-process-text article").html(OrderTextContent.step2 + OrderTextContent.info);
            } else if ($(".order-status").text("Complete") && passedDays >= 3 && passedDays <= 6) {
                $(".step3").addClass("done active");
                $(".step2").addClass("done");
                $(".step1").addClass("done");
                $(".progressed").addClass("progress2");
                $("#current-process-text article").html(OrderTextContent.step3 + OrderTextContent.info);
            } else if ($(".order-status").text("Complete") && passedDays > 6 && passedDays <= 10) {
                $(".step4").addClass("done active");
                $(".step3").addClass("done");
                $(".step2").addClass("done");
                $(".step1").addClass("done");
                $(".progressed").addClass("progress3");
                $("#current-process-text article").html(OrderTextContent.step4 + OrderTextContent.info);
            } else {
                $("#order-tracker-container").hide();
            }
        }


    });
</script>



<style>
    .payment-method-name {
        text-align: left;
        font-weight: 400;
    }

    .payment-method-information-details {
        text-align: justify;
        font-size: 0.9em;
    }

    .close-button-span {
        top: 12px;
        padding: 5px;
        right: 15px;
        color: #aaaaaa;
        float: right;
        font-size: 2em;
        font-weight: 300;
        position: absolute;
    }
</style>





<!-- Modal content -->
<div id="myModalPopUp" class="modal-content">
    <span id="closeButton">&times;</span>
    <div class="flex-row flag-header-row">
        <img src="https://www.countryflags.io/be/flat/24.png" alt="Country flag">
        <h2 id="routingInfoHeader" style="color: #282828"></h2>
    </div>
    <div class="flex-row text-button-row">
        <p id="routingInfoText" style="color: #282828"></p>
        <button type="button" id="routingLink">Jungle Gym</button>

    </div>
</div>


<!-- Script for visitor routing -->
<script>

var Websites = {
        INT: ["https://www.junglegym.com", "International"],
        NL: ["https://www.junglegym.nl", "Nederland"],
        DK: ["https://www.junglegym.dk", "Danmark"],
        EE: ["https://www.junglegym.ee", "Esti"],
        ES: ["https://www.junglegym.es", "España"],
        FR: ["https://www.junglegym.fr", "France"],
        GR: ["https://www.junglegym.gr", "Ελλάδα"],
        IS: ["https://www.junglegym.is", "Ísland"],
        MK: ["https://www.junglegym.mk", "Makedonija"],
        AT: ["https://www.junglegym.at", "Österreich"],
        BE: ["https://www.junglegym.be", "Belgium"],
        DE: ["https://www.junglegym.de", "Deutschland"],
        IT: ["https://www.junglegym.it", "Italia"],
        IE: ["https://www.junglegym.ie", "Ireland"],
        LV: ["https://www.junglegym.lv", "Latvija"],
        LU: ["https://www.junglegym.lu", "Luxemburg"],
        PT: ["https://www.junglegym.pt", "Portugal"],
        CH: ["https://www.junglegym.ch", "Switzerland"],
        SI: ["https://www.junglegym.si", "Slovenija"],
        ZA: ["https://www.junglegym.co.za", "South Africa"],
        NO: ["https://www.junglegym.co.no", "Norge"],
        FI: ["https://www.junglegym.fi", "Suomi"],
        SE: ["https://www.junglegym.se", "Sverige"],
        PL: ["https://www.junglegym.pl", "Polska"],
        UA: ["https://www.junglegym.ua", "Україна"],
        UK: ["https://www.junglegym.co.uk", "UK"]
}

    var landedSite = window.location.hostname;
    var landedSiteCountry = landedSite.slice(-2).toUpperCase();
    if (landedSiteCountry === "UK") {
        landedSiteCountry = "GB";
    }
    var visitorCountry;
    var visitorCountryName;
    var Warnings;
    // Get the modal
    //var modal = document.getElementById("myModalPopUp");
    // Get the closeButton ID that closes the modal
    var closeButton = document.getElementById("#closeButton");
    require(["jquery", "domReady!"], function ($) {
        console.log(`Landed site is ${landedSite}
             Language of the website is ${landedSiteCountry}`);
        try {
            $.ajax({
                url: "https://geoip-db.com/jsonp",
                jsonpCallback: "callback",
                dataType: "jsonp",
                success: function (location) {
                    visitorCountry = location.country_code;
                    visitorCountryName = location.country_name;
                    console.log(visitorCountryName);

                    [   `Nl: Hé! Wij denken dat je in Nederland bent. Winkel daar`, 
                        `Fr: Hey! Il semblerait que vous soyez en France. Shop ici`,
                        `De: Hi! Wir denken, dass du dich in Deutschland befindest. Jetzt shoppen`,
                        `Es: !Hola! Creemos que estas en España. Compra aquí`,
                        `En: Hey! We think you are in Netherlands. Shop there`];



                    Warnings = {
                        INT: [`Hey! We think you are in`, `Shop there`],
                        EN: [`Hey! We think you are in`, `Shop there`],
                        NL: [`Hé! Wij denken dat je in`, `bent.`, `Winkel daar`],
                        ES: [`!Hola! Creemos que estas en`, `Compra aquí`],
                        FR: [`Hey! Il semblerait que vous soyez en`, `Shop ici`],
                        DE: [`Hi! Wir denken, dass du dich in`, `befindest`, `Jetzt shoppen`],
                    };

                    console.log("lets check " + Warnings.DE[0]);

                    // If landed site is other than where user is from
                    if (landedSiteCountry !== visitorCountry) {
                        //Modal Pop up appears when visitor is at the wrong page
                        $("#myModalPopUp").css("display", "block");
                        //$(".page-wrapper>*:not(#myModalPopUp)").css("filter", "blur(3px)");
                        // When the user clicks on (x), close the modal
                        $("#closeButton").click(function () {
                            $("#myModalPopUp").remove();
                            //$(".page-wrapper>*:not(#myModalPopUp)").css("filter", "none");
                        });
                        $(".flag-header-row img").attr("src", ('https://www.countryflags.io/' + visitorCountry + '/flat/24.png'));
                        // $("#routingInfoHeader").text("You are from " + visitorCountryName + "!");
                        // $("#routingInfoText").text("Go to > ");
                        var linkToShow = "";
                        // If the user is from a country we have a website for
                        if (Websites.hasOwnProperty(visitorCountry)) {
                            linkToShow = Websites[visitorCountry][0];
                            // the green button takes the visitor to the right website
                            $("#routingLink").click(function () {
                                window.open(linkToShow, '_self');
                            });
                            // The text on the button is replaced with the country specific Jungle Gym name
                            $("#routingLink").text("Jungle Gym " + Websites[visitorCountry][1]);

                            if( visitorCountry == "NL" || visitorCountry == "BE"){
                                $('#routingInfoHeader').text(`${Warnings.NL[0]} ${visitorCountryName} ${Warnings.NL[1]}`);
                                $('#routingInfoText').text(Warnings.NL[2]);
                            }
                            else if (visitorCountry == "DE" || visitorCountry == "CH" || visitorCountry == "AT") {
                                $('#routingInfoHeader').text(`${Warnings.DE[0]} ${visitorCountryName} ${Warnings.DE[1]}`);
                                $('#routingInfoText').text(Warnings.DE[2]);
                            }
                            else if (visitorCountry == "FR" || visitorCountry == "LU"){
                                $('#routingInfoHeader').text(`${Warnings.FR[0]} ${visitorCountryName}`);
                                $('#routingInfoText').text(Warnings.FR[1]);
                            }
                            else if (visitorCountry == "ES"){
                                $('#routingInfoHeader').text(`${Warnings.ES[0]} ${visitorCountryName}`);
                                $('#routingInfoText').text(Warnings.ES[1]);
                            } 
                            else {
                                $('#routingInfoHeader').text(`${Warnings.EN[0]} ${visitorCounryName}`);
                                $('#routingInfoText').text(Warnings.EN[1]);
                            }

                            //.com website is suggested if the user is from a country we do not
                            // have a dedicated website for
                        } else {
                                $('#routingInfoHeader').text(`${Warnings.INT[0]} ${visitorCountryName}`);
                                $('#routigInfoText').text(Warnings.INT[1]);

                            // Link to show is replaced with www.junglegym.com
                            linkToShow = Websites.INT[0];
                            $("#routingLink").text("Jungle Gym " + Websites.INT[1]);
                            //green button takes the user to the international website.
                            $("#routingLink").click(function () {
                                window.open(linkToShow, '_self');
                            });
                        }

                    }
                }
            });
        }
        catch (err) {
            console.error("Geoip-db.com is not working!");
            console.error(err.message + ' ' + err.name);
        }
    });
</script>


<!--Geo Location Pop up related styles-->
<style>
    /* Modal Content */
    .modal-content {
        z-index: 9500;
        display: none;
        position: fixed;
        justify-content: center;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: #fefefe;
        box-shadow: 0 0 0 2px rgb(255, 255, 255), 0.3em 0.3em 1em rgba(0, 0, 0, 0.3);
    }
    /* The Close Button */
    #closeButton {
        right: 2%;
        font-weight: 300;
        color: #aaaaaa;
        float: right;
        font-size: 2.7em;
        position: absolute;
    }
    .close:hover,
    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }
    #routingLink {
        border-radius: 0 !important;
        margin-top: -5px;
        display: inline-block;
        text-align: center;
        padding: 2px 12px 2px 12px;
        background-color: rgb(78, 196, 37);
        border: none;
        color: rgb(255, 255, 255);
        cursor: pointer;
        font-size: 1;
        font-weight: 600;
        text-align: center;
        margin-left: 5px;
    }
    #routingInfoHeader {
        display: table;
        padding: 0 5px;
        font-weight: 300;
        text-align: center;
        font-size: 1.3em;
        display: inline-block;
    }
    #routingInfoText {
        font-size: 1em;
        text-align: center;
        display: inline-block;
        margin-right: 5px;
        font-weight: 300;
    }
    .flag-header-row img {
        padding-right: 5px;
        padding-bottom: 5px;
    }
    .flag-header-row {
        display: table;
        margin: -6px auto -6px auto;
    }
    .flex-row.text-button-row {
        display: table;
        margin: 0 auto 0 auto;
    }
    @media(max-width: 800px){
    body.catalog-product-view .modal-content{
        z-index: 8;
        /* display: none; */
        position: fixed;
        justify-content: center;
        bottom: 106px;
        left: 0;
        padding-bottom: 10px;
        right: 0;
        background-color: #fefefe;
        box-shadow: 0 0 0 2px rgb(255, 255, 255), 0.3em 0.3em 1em rgba(0, 0, 0, 0.3);
    }
}
</style>
